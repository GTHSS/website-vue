<!DOCTYPE html>
<html>
  <head>
    <script
      defer
      async
      src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6547428867970188"
      crossorigin="anonymous"
    ></script>
    <script src="./external/three.r134.min.js"></script>
    <script async src="./external/vanta.dots.min.js"></script>
    <script defer async src="./js/audioPlayer.js"></script>
    <script defer async src="./js/detectMobile.js"></script>
    <script defer async src="./js/helpers.js"></script>
    <script defer>
      // Dynamically sets the old CSS background.
      function setBgOld() {
        const htmlBody = document.getElementsByTagName("body")[0];

        console.log("Loading old CSS...");
        loadCssIntoDom("./css/oldBackground.css"); // from helpers.js

        for (let i = 1; i < 4; i++) {
          // Creating element
          console.log("Inserting background parts... [" + i + "/3]");
          const newElement = document.createElement("div");
          newElement.classList.add("bg");
          if (i > 1) {
            newElement.classList.add("bg" + i);
          }
          htmlBody.append(newElement);
        }
        console.log("Removing stub background element...");
        document.getElementById("background").id = ""; // remove old background stub id.
      }
      function setBg() {
        injectMobilePredicate(); // from detectMobile.js

        let isMobile = window.isMobile(); // Verify platform.

        if (isMobile) {
          console.log(
            "The device is a mobile device, therefore, we use the old animated CSS theme."
          );
          setBgOld();
          console.log("Old Background Applied.");
          return;
        }
        VANTA.DOTS({
          el: "#background",
          mouseControls: true,
          touchControls: true,
          gyroControls: false,
          minHeight: window.innerHeight - 40,
          minWidth: window.innerWidth - 100,
          scale: 1.0,
          scaleMobile: 1.0,
          color: 0xffffff,
          color2: 0xf2f2f2,
          backgroundColor: 0x0,
          spacing: 27.0,
          showLines: false,
        });
      }
      function startActivity() {
        console.log("Starting Audio Playback...");
        playAudio("./audio/party.mp3");
        console.log("Audio Playback started.");
        // ----
        console.log("Starting Page Background...");
        setBg();
        console.log("Page Background started.");
      }
    </script>
    <title>Time to party bbg</title>
    <meta charset="UTF-8" />
    <meta name="description" content="Sussy Technology&trade;" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="icon" href="./images/blob_dance.gif" type="image/gif" />
    <style>
      @import url("https://fonts.googleapis.com/css2?family=Source+Sans+Pro&display=swap");

      h1 {
        text-align: center;
        padding-top: 25%;
      }

      h2 {
        text-align: center;
        text-rendering: optimizeLegibility;
        color: white;
        font-size: 6vw;
        font-family: "Source Sans Pro", "Gill Sans MT", Calibri, "Trebuchet MS",
          sans-serif;
      }
    </style>
  </head>

  <body onload="startActivity()" style="background-color: #000000">
    <div id="background" style="z-index: -1"></div>
    <div style="flex: content; padding: 4vw">
      <h2>Don't let the party die!</h2>
    </div>
    <div
      style="
        position: absolute;
        left: 50%;
        top: 50%;
        transform: translate(-50%, -50%);
      "
    >
      <img
        alt="party-emoji"
        src="/images/blob_dance.gif"
        width="200"
        height="200"
      />
    </div>
  </body>
</html>
